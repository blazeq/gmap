var arrElement2 = new Array(
["118.4666667","36.700000000000003","54831","青州","6"]
,["118.7166667","36.883055560000003","54832","寿光","6"]
,["118.54972220000001","36.5","54835","临朐","6"]
,["118.83305559999999","36.700000000000003","54837","昌乐","6"]
,["119.40000000000001","36.859722220000002","54841","昌邑","6"]
,["119.1875","36.832222219999998","54843","寒亭","6"]
,["119.16666669999999","36.416666669999998","54844","安丘","6"]
,["119.7166667","36.390000000000001","54846","高密","6"]
,["119.41666669999999","35.983055559999997","54848","诸城","6"]
,["119.0788889","36.693055559999998","D2001","市局站","7"]
,["119.1938889","37.24555556","D2002","潍坊港","6"]
,["118.8552778","37.266388890000002","D2003","羊口港","6"]
,["118.7016667","37.174166669999998","D2005","林海","6"]
,["118.9330556","36.818055559999998","D2006","稻田","4"]
,["118.78944439999999","36.995277780000002","D2007","田柳","4"]
,["118.6202778","37.029444439999999","D2008","台头","4"]
,["118.50222220000001","36.888611109999999","D2009","朱良","4"]
,["118.7016667","36.69277778","D2010","谭坊","4"]
,["118.2241667","36.634444440000003","D2011","庙子","4"]
,["118.40166670000001","36.555833329999999","D2012","王坟","4"]
,["118.42805559999999","36.774722220000001","D2013","东高","4"]
,["118.30138890000001","36.383333329999999","D2014","嵩山","4"]
,["118.5283333","36.404166670000002","D2015","冶源","4"]
,["118.4736111","36.181388890000001","D2016","九山","4"]
,["118.6919444","36.550833330000003","D2017","上林","4"]
,["118.88611109999999","36.5625","D2018","乔官","4"]
,["118.9947222","36.43527778","D2019","朱汉","4"]
,["118.8661111","36.446388890000001","D2020","oN","6"]
,["119.38416669999999","36.386944440000001","D2021","王家庄","4"]
,["119.0902778","36.26583333","D2022","辉渠","4"]
,["118.955","36.163055559999997","D2023","柘山","4"]
,["119.2675","36.157222220000001","D2024","石桥子","4"]
,["119.2397222","35.916111110000003","D2025","枳沟","4"]
,["119.6558333","35.997500000000002","D2026","林家村","4"]
,["119.5316667","35.802222219999997","D2027","桃林","6"]
,["119.9058333","36.452777779999998","D2028","河崖","4"]
,["119.4833333","36.22666667","D2029","注沟","4"]
,["119.77500000000001","36.229444440000002","D2030","李家营","4"]
,["119.20277780000001","37.029722219999996","D2031","央子","4"]
,["119.16","36.943055559999998","D2032","泊子","4"]
,["119.07250000000001","36.949166669999997","D2033","南孙","4"]
,["119.3405556","36.980555559999999","D2034","龙池","4"]
,["119.4630556","36.805833329999999","D2035","宋庄","4"]
,["119.5272222","36.998055559999997","D2036","卜庄","4"]
,["119.47","36.655277779999999","D2037","饮马","4"]
,["118.7597222","36.350000000000001","D2038","白塔","5"]
,["119.19444439999999","36.261944440000001","D2039","官庄","4"]
,["119.06805559999999","36.359999999999999","D2040","凌河","4"]
,["119.1802778","36.024999999999999","D2041","贾悦","4"]
,["119.5333333","36.11972222","D2042","白尺河","4"]
,["119.6530556","36.56027778","D2043","大牟家","4"]
,["119.535","36.372222219999998","D2044","双羊","4"]
,["118.7541667","36.95333333","D2075","古城","2"]
,["118.9652778","36.984999999999999","D2076","侯镇","2"]
,["118.7416667","36.754722219999998","D2077","纪台","2"]
,["118.8316667","36.859722220000002","D2078","洛城","2"]
,["118.58861109999999","36.955277780000003","D2079","化龙","2"]
,["118.92027779999999","37.092777779999999","D2080","道口","2"]
,["118.8847222","36.965277780000001","D2081","上口","2"]
,["118.94555560000001","36.886111110000002","D2082","留吕","2"]
,["118.3105556","36.746666670000003","D2083","邵庄","2"]
,["118.5905556","36.808333330000004","D2084","口埠","2"]
,["118.52305560000001","36.621666670000003","D2085","弥河","2"]
,["118.2711111","36.462222220000001","D2086","仰天山","6"]
,["118.4897222","36.735833329999998","D2087","开发区","2"]
,["118.5788889","36.75","D2088","东夏","2"]
,["118.6011111","36.647500000000001","D2089","黄楼","2"]
,["118.4969444","36.840000000000003","D2090","高柳","2"]
,["119.4608333","36.852499999999999","D2091","围子","2"]
,["119.5008333","36.60166667","D2092","北孟","2"]
,["119.33861109999999","36.83361111","D2093","西城","2"]
,["119.5113889","36.520277780000001","D2094","丈岭","2"]
,["119.45222219999999","36.904444439999999","D2095","夏店","2"]
,["119.26833329999999","36.83583333","D2096","双台","2"]
,["119.2066667","36.79972222","D2097","寒亭街办","2"]
,["119.3769444","36.736388890000001","D2098","朱里","2"]
,["119.04361110000001","36.811666670000001","D2099","双杨","2"]
,["119.1688889","36.854444440000002","D2100","固堤","2"]
,["118.7633333","36.447777780000003","D2101","柳山","2"]
,["118.6108333","36.381388889999997","D2102","辛寨","2"]
,["118.3891667","36.311388890000003","D2103","寺头","2"]
,["118.5661111","36.514166670000002","D2104","东城","2"]
,["118.6911111","36.303055559999997","D2105","蒋峪","2"]
,["118.4083333","36.445","D2106","五井","2"]
,["118.6963889","36.22666667","D2107","大关","2"]
,["118.5211111","36.285833330000003","D2108","石家河","2"]
,["118.9297222","36.723333330000003","D2109","朱刘","2"]
,["118.7986111","36.362499999999997","D2110","高崖水库","4"]
,["118.90888889999999","36.63777778","D2111","五图","2"]
,["118.8416667","36.700555559999998","D2112","体育场","2"]
,["118.81277780000001","36.595277780000004","D2113","北岩","2"]
,["118.98833329999999","36.527777780000001","D2114","营丘","2"]
,["119.2566667","36.334444439999999","D2115","金冢子","2"]
,["118.93527779999999","36.322499999999998","D2116","红沙沟","2"]
,["118.8394444","36.249444439999998","D2117","吾山","2"]
,["119.1125","36.170000000000002","D2118","庵上","2"]
,["119.3952778","36.271944439999999","D2119","景芝","6"]
,["119.2494444","36.438611109999997","D2120","开发区","2"]
,["119.2147222","36.517777780000003","D2121","刘家尧","2"]
,["119.2830556","36.233333330000001","D2122","临浯","2"]
,["119.14333329999999","36.319722220000003","D2123","白芬子","2"]
,["119.0575","36.073611110000002","D2124","孟疃","2"]
,["119.4061111","36.185555559999997","D2125","相州","2"]
,["119.4163889","35.842222219999996","D2126","郝戈庄","2"]
,["119.6147222","35.912500000000001","D2127","桃园","2"]
,["119.4022222","36.040277779999997","D2128","开发区","2"]
,["119.33333330000001","35.965555559999999","D2129","吕标","2"]
,["119.51111109999999","35.970833329999998","D2130","朱解","2"]
,["119.28833330000001","36.103611110000003","D2131","程戈庄","2"]
,["119.7788889","36.461944440000003","D2132","姜庄","2"]
,["119.625","36.251388890000001","D2133","柴沟","2"]
,["119.8255556","36.357500000000002","D2134","朝阳","2"]
,["119.65166670000001","36.329444440000003","D2135","呼家庄","2"]
,["119.67805559999999","36.432499999999997","D2136","康庄","2"]
,["119.54722219999999","36.284722219999999","D2137","井沟","2"]
,["119.62111109999999","36.629722219999998","D2138","周戈庄","2"]
,["119.70277780000001","36.267222220000001","D2139","拒城河","2"]
,["119.2386111","36.715000000000003","D2140","高速东","4"]
,["119.1558333","36.748333330000001","D2141","高速口","4"]
,["119.0280556","36.74777778","D2142","高速西","4"]
,["119.12","36.654444439999999","D2143","金宝","4"]
,["118.6830556","36.816666669999996","D2144","孙家集","4"]
,["118.85361109999999","36.786944439999999","D2145","田马","2"]
,["118.6777778","36.893055560000001","D2146","文家","2"]
,["118.5325","36.68","D2147","东坝","4"]
,["118.56583329999999","36.888611109999999","D2148","何官","2"]
,["119.4355556","36.505555559999998","D2149","峡山水库","6"]
,["119.4613889","36.73416667","D2150","石埠","2"]
,["119.4030556","36.575833330000002","D2151","錾","2"]
,["119.2633333","36.775833329999998","D2152","河滩","2"]
,["118.61916669999999","36.195555560000003","D2153","沂山","6"]
,["118.47333329999999","36.494999999999997","D2154","纸坊","2"]
,["118.50944440000001","36.464722219999999","D2155","杨善","2"]
,["118.92388889999999","36.404166670000002","D2156","红河","2"]
,["118.82166669999999","36.65138889","D2157","城南","2"]
,["119.1016667","36.119444440000002","D2158","石埠子","4"]
,["119.1508333","36.44055556","D2159","关王","2"]
,["119.47944440000001","36.143333329999997","D2160","昌城","2"]
,["119.3563889","36.111944440000002","D2161","九台","2"]
,["119.8358333","36.446388890000001","D2162","夏庄","2"]
,["119.7622222","36.351388890000003","D2163","密水","4"]
,["118.65777780000001","36.529166670000002","D2164","临朐果园","6"]
,["118.97750000000001","36.685000000000002","D2165","符山","2"]
,["119.1541667","36.707777780000001","D2166","市政府","2"]
,["119.0316667","36.65138889","D2167","望留","2"]
,["119.08083329999999","36.620833330000004","D2168","白浪河水库","2"]
,["119.51277779999999","37.123333330000001","D2169","防潮坝","6"]
,["119.79888889999999","36.329444440000003","D2173","柏城","5"]
,["118.5908333","36.490833330000001","D2174","口埠供销社","6"]
,["119.17583329999999","36.717777779999999","D2175","潍坊学院","6"]
,["119.3916667","36.951666670000002","D2188","柳疃","4"]
,["119.19305559999999","37.243333329999999","D2997","潍坊","1"]
,["119.3286111","36.400277780000003","wfaq1","安丘","4"]
,["118.81027779999999","36.85916667","wfdp1","寿光","3"]
);


//地图对象
var map;
//信息窗口对象
var infowindow;
//var aa = function(){alert("dd");};
//alert(wind_arr[0][2]);

function initialize()
{
	var latlng = new google.maps.LatLng(36.693, 119.078);
	var myOptions = {
		zoom: 9,
		center: latlng,
		scaleControl: true, //显示比例尺
		streetViewControl: false, //不显示街景控件
		mapTypeId: google.maps.MapTypeId.TERRAIN	  
	};
	map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

///////////////////////////////////////////

	//fDrawAll();
	//fShowElement("wind_d");
	//fShowElement("temp");
	//fShowElement("wind_s");
	//fShowElement("rain");
	//fShow();

	//fDrawMapLabel();
	
	change_time(0);
}
/**************************************************************************/


//初始化选中的复选框，显示其对应元素内容
function fShow()
{
	var $sendMail = $("input[name='checkbox_ele']");     
	$sendMail.each( function() {     
	if ($(this).attr("checked")) { 
		fShowElement($(this).val());
		}
	//else{}
	});  
}

//删除已有的层
function fDelete()
{
	for (i in arrayWind_d) arrayWind_d[i].setMap(null);
	arrayWind_d.length = 0;
	for (i in arrayTemp) arrayTemp[i].setMap(null);
	arrayTemp.length = 0;
	for (i in arrayWind_s) arrayWind_s[i].setMap(null);
	arrayWind_s.length = 0;
	for (i in arrayRain) arrayRain[i].setMap(null);
	arrayRain.length = 0;
	for (i in arrayName) arrayName[i].setMap(null);
	arrayName.length = 0;
}

var arrayWind_d = [];
var arrayTemp = [];
var arrayWind_s = [];
var arrayRain = [];
var arrayName = [];
//初始化，所有要素数据都生产出来，不显示。
function fDrawAll(dt)
{
	for(var i=0;i<arrElement2.length;i++)
	{
		var myLatLng = new google.maps.LatLng(arrElement2[i][1],arrElement2[i][0]);
		if(arrElement2[i][4]>2)//arrElement2[i][4]>2
		{
			//风向
			var urlWind_d = "./build_wind_d.php?id="+arrElement2[i][2]+"&dt="+dt;
			var marker_wd = new google.maps.Marker({
				position: myLatLng,                                              
				shadow: new google.maps.MarkerImage(urlWind_d,new google.maps.Size(80, 80),new google.maps.Point(0,0),new google.maps.Point(40, 40)),
				icon: "./images/12px.gif",//images/weifang_empty_l.gif
				map:map,
				visible:false
			});
			arrayWind_d.push(marker_wd);
			//风速
			var urlWind_s = "./build_wind_s.php?id="+arrElement2[i][2]+"&dt="+dt;
			var marker_ws = new google.maps.Marker({
				position: myLatLng,                                              
				shadow: new google.maps.MarkerImage(urlWind_s,new google.maps.Size(80, 80),new google.maps.Point(0,0),new google.maps.Point(40, 40)),
				icon: "./images/12px.gif",//images/weifang_empty_l.gif
				map:map,
				visible:false
			});
			arrayWind_s.push(marker_ws);
		}
		//温度
		var urlTemp = "./build_temp.php?id="+arrElement2[i][2]+"&dt="+dt;
		var marker_temp = new google.maps.Marker({
			position: myLatLng,                                              
			shadow: new google.maps.MarkerImage(urlTemp,new google.maps.Size(80, 80),new google.maps.Point(0,0),new google.maps.Point(40, 40)),
			icon: "./images/12px.gif",//images/weifang_empty_l.gif
			map:map,
			visible:false
		});
		arrayTemp.push(marker_temp);
		//雨量
		var urlRain = "./build_rain.php?id="+arrElement2[i][2]+"&dt="+dt;
		var marker_rain = new google.maps.Marker({
			position: myLatLng,                                              
			shadow: new google.maps.MarkerImage(urlRain,new google.maps.Size(80, 80),new google.maps.Point(0,0),new google.maps.Point(40, 40)),
			icon: "./images/12px.gif",//images/weifang_empty_l.gif
			map:map,
			visible:false
		});
		arrayRain.push(marker_rain);
		//站点名称
		var urlName = "./build_name.php?name="+arrElement2[i][3];//+"&r="+rnd();//+arrElement2[i][3];
		var marker_name = new google.maps.Marker({
			position: myLatLng,                                              
			shadow: new google.maps.MarkerImage(urlName,new google.maps.Size(80, 80),new google.maps.Point(0,0),new google.maps.Point(40, 40)),
			icon: "./images/12px.gif",//images/weifang_empty_l.gif
			map:map,
			visible:false
		});
		arrayName.push(marker_name);

		//fListener(marker_wd,"1");
		//fListener(marker_ws,"2");
		//fListener(marker_temp,"3");
		//fListener(urlRain,"4");
		//fListener(marker_name,"5");
	}
//alert (arrayTemp.length);
}
/*******************对已经读取到数据层的显示、隐藏、删除*******************/
//显示要素（温度、风）
function fShowElement(element)
{
	switch(element)
	{
		case "wind_d":
			for (i in arrayWind_d) arrayWind_d[i].setVisible(true);
			break;
		case "temp":
			for (i in arrayTemp) arrayTemp[i].setVisible(true);
			break;
		case "wind_s":
			for (i in arrayWind_s) arrayWind_s[i].setVisible(true);
			break;
		case "rain":
			for (i in arrayRain) arrayRain[i].setVisible(true);
			break;
		case "name":
			for (i in arrayName) arrayName[i].setVisible(true);
			break;
		default:
		//document.write("I'm looking forward to this weekend!")
	}
}

//隐藏要素（温度、风）
function fHideElement(element)
{
	switch(element)
	{
		case "wind_d":
			for (i in arrayWind_d) arrayWind_d[i].setVisible(false);
			break;
		case "temp":
			for (i in arrayTemp) arrayTemp[i].setVisible(false);
			break;
		case "wind_s":
			for (i in arrayWind_s) arrayWind_s[i].setVisible(false);
			break;
		case "rain":
			for (i in arrayRain) arrayRain[i].setVisible(false);
			break;
		case "name":
			for (i in arrayName) arrayName[i].setVisible(false);
			break;
		default:
		//document.write("I'm looking forward to this weekend!")
	}
}

//删除要素（温度、风）
function fDelElement(element)
{
	switch(element)
	{
		case "wind_d":
			for (i in arrayWind_d) arrayWind_d[i].setMap(null);
			arrayWind_d.length = 0;
			break;
		case "temp":
			for (i in arrayTemp) arrayTemp[i].setMap(null);
			arrayTemp.length = 0;
			break;
		case "wind_s":
			for (i in arrayWind_s) arrayWind_s[i].setMap(null);
			arrayWind_s.length = 0;
			break;
		case "rain":
			for (i in arrayRain) arrayRain[i].setMap(null);
			arrayRain.length = 0;
			break;
		case "name":
			for (i in arrayName) arrayName[i].setVisible(true);
			arrayName.length = 0;
			break;
		default:
		//document.write("I'm looking forward to this weekend!")
	}
	
}
/*******************对已经读取到数据层的显示、隐藏、删除*******************/


/*************************************/
//根据时间产生随机数函数
function rnd()
{
	suffix = Math.round(Math.random()*10000);     //产生一个1万内的随机数
	unixtime = Math.round(new Date().getTime()/1000);  //取得当前时间的unix时间戳
	rand = unixtime + "" + suffix;
	return rand;
}

function fListener(beachMarker,contentString)
{
	google.maps.event.addListener(beachMarker, 'click', function() {
	aa(beachMarker,contentString);
	});
}

function aa(beachMarker,contentString)
{
	if(infowindow) infowindow.close(); //如果有打开的infowindow,先关掉
	infowindow = new google.maps.InfoWindow({
		content: contentString
	});
	infowindow.open(map,beachMarker);
}



function select_page()
{
	//var ymdh = $("#hidden_date").html();
	var selectedStr = "";
	var selectedStr_no = "";
	var $sendMail = $("input[name='checkbox_ele']");     
	$sendMail.each( function() {     
	if ($(this).attr("checked")) {     
		selectedStr += $(this).val() + "|";     
		}
	else{selectedStr_no += $(this).val() + "|";}
		});  
	var ele = selectedStr.split("|");
	var ele_no = selectedStr_no.split("|");
	/*************************/
	

	for(i=0;i<ele.length;i++)
	{
		//$(ele[i]).html("<img src=\""+ele_url_arr[ele[i]]+"?ymdh="+ymdh+"\" width=\"992\" height=\"874\" border=\"0\" > ");
		//fDrawWind();
	}

	for(i=0;i<ele_no.length;i++)
	{
		//$(ele_no[i]).html("");
	}
}





/***************************************************************************************************/
//计算时间，+一小时，-一小时
function change_time(jg)
{
	if(jg == 0)
	{
		var qiu = new Date();
		var k = qiu.getFullYear() + "-"  + one_to_double((qiu.getMonth()+1)) + "-"  + one_to_double(qiu.getDate()) + " " + one_to_double(qiu.getHours()) + ":00";
		$("#datetimeinner_box").val(k);
	}
	else
	{
		var da = $("#datetimeinner_box").val();
		y = da.substr(0,4);
		m = da.substr(4,2);
		d = da.substr(6,2);
		h = da.substr(8,2);
		//alert(da);
		var t=new Date(da.replace(/\-/g,'/'));
		//alert(t.getTime());
		var changetime = t.getTime() + jg*3600000;
		//alert(changetime);
		var qiu = new Date(changetime);
		var k = qiu.getFullYear() + "-"  + one_to_double((qiu.getMonth()+1)) + "-"  + one_to_double(qiu.getDate()) + " " + one_to_double(qiu.getHours()) + ":00";
		$("#datetimeinner_box").val(k);
		//alert(qiu);
	}
	fDelete();
	fDrawAll(k);
	fShow();
}

function one_to_double(o)
{
	var d;
	if(o < 10)
	{
		d = "0" + o;
	}
	else
	{
		d = o;
	}
	return d;
}

















